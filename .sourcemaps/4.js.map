{"version":3,"sources":["../../src/pages/park-details/park-details.module.ts","../../src/pages/park-details/park-details.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ParkDetailsPage } from './park-details';\n\n@NgModule({\n  declarations: [\n    ParkDetailsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ParkDetailsPage),\n  ],\n})\nexport class ParkDetailsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/park-details/park-details.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { AngularFireDatabase, FirebaseListObservable} from 'angularfire2/database';\r\nimport { Dialogs } from '@ionic-native/dialogs';\r\nimport * as firebase from 'firebase';\r\nimport { ParkAuthsPage } from '../park-auths/park-auths';\r\n\r\n/**\r\n * Generated class for the ParkDetailsPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-park-details',\r\n  templateUrl: 'park-details.html',\r\n})\r\nexport class ParkDetailsPage {\r\n  check: Object;\r\n  key: any;\r\n  //parkDetailRef;toggle;\r\n  //detail: Array<Object> = [];\r\n  tog: FirebaseListObservable<any[]>;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public af:AngularFireDatabase, public dialogs: Dialogs) {\r\n  \r\n    this.check = navParams.data.parkData;\r\n    this.key = navParams.data.parkData.key;\r\n//    this.parkDetailRef = firebase.database().ref('/parks/'+this.key);\r\n    this.tog = af.list('/parks/'+this.key+'/detail/');\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    /*\r\n    this.parkDetailRef.child('detail').on('value', data=>{\r\n      data.forEach(data => {\r\n       this.detail.push({\r\n          carnum: data.val().carnum,\r\n          toggle: data.val().toggle,\r\n          id: data.val().id})      \r\n    }); \r\n   });\r\n   */\r\n  }\r\n  \r\n  toggleButton(toggles:any){\r\n    \r\n    //window.alert( toggles.toggle);\r\n\r\n      firebase.database().ref('/parks/'+this.key+'/detail/'+toggles.id+'/')\r\n      .update({carnum:toggles.carnum , toggle: !toggles.toggle});\r\n    //   this.toggle.on('value', data=>{\r\n  //     data.forEach(data => {\r\n  //      if(data.val().carnum == details.carnum){\r\n  //        this.toggle.update(details,{carnum:details.carnum , toggle:!details.toggle});\r\n  //      }\r\n       \r\n      \r\n  //   }); \r\n  //  });\r\n  \r\n  }\r\n\r\n  manage(){\r\n    var user = firebase.auth().currentUser;\r\n    var db = firebase.database().ref('/parks/'+this.key+'/managers');\r\n    var navCtrl = this.navCtrl;\r\n    var key = this.key;\r\n    db.orderByChild('key')\r\n    .equalTo(user.uid)\r\n    .once('value', function(snapshot){\r\n      if(snapshot.exists())\r\n      {\r\n        navCtrl.push(ParkAuthsPage,{id:key});\r\n      }\r\n      else\r\n      {\r\n        window.alert('unauthorized access');\r\n      }\r\n    })\r\n\r\n    \r\n  }\r\n\r\n  ifAuth(){\r\n    var user = firebase.auth().currentUser;\r\n    const valid = firebase.database().ref(`/parks/`+this.key+'/manager/');\r\n    \r\n    return valid.orderByChild('key')\r\n    .equalTo(user.uid)\r\n    .once('value',function(snapshot){\r\n      return snapshot.exists();\r\n    })\r\n\r\n  }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/park-details/park-details.ts"],"sourceRoot":""}